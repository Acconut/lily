define f(input: integer) : integer {
    var trace = calltrace()

    if trace.size() != 3:
        stderr.write("Failed.\n")

    return input
}

define map(x: list[integer], g: function(integer => integer)) {
    g(x[0])
}

var v = [1]

v.map(f)
map(v, f)
v.map(f)
map(v, f)
