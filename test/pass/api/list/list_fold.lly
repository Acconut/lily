if [1, 2, 3, 4].fold(0, {|a, b| a + b}) != 10:
    stderr.print("Failed.1")

if [1, 2, 3, 4].fold(10, {|a, b| a + b}) != 20:
    stderr.print("Failed.2")

if ["b", "c", "d"].fold("a", {|a, b| a.concat(b)}) != "abcd":
    stderr.print("Failed.3")

define f {
    [1, "2", [3]].fold([1 => 1], {|a, b| b})
}

f()

var v: list[integer] = []

if v.fold(0, {|a, b| a + b}) != 0:
    stderr.print("Failed.")
